lib996:include("Script/serialize.lua")
local cfg_huiyuan = {
    var = {
        cur_VIP = "当前会员等级",
    },
    msg = {
        chenggong = '{"Msg":"<font color=\'#ff0000\'>升级成功！</font>","Type":9}',
    },
    id = 309,
    [1] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 1%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 1
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [2] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 2%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 2
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [3] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 3%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 3
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [4] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 4%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 4
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [5] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 5%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 5
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [6] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 6%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 6
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [7] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 7%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 7
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [8] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 8%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 8
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
    [9] ={
        miaoshu = "<font color='#01d1ff'>打宝概率提升 9%<br>装备回收比例提升5%<br>对怪每秒伤害提升960</font>",
        jiangli = {
            [1] = {
                [1] = 10014,
                [2] = 9
            },
            [2] = {
                [1] = 10014,
                [2] = 5
            },
            [3] = {
                [1] = 10014,
                [2] = 10
            },
            [4] = {
                [1] = 10014,
                [2] = 50
            },
            [5] = {
                [1] = 10014,
                [2] = 100
            },
        }
    },
}
local cfg_renwu = {
    [1] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>2转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [2] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>3转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [3] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>4转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [4] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>5转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [5] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>6转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [6] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>7转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [7] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>8转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [8] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>9转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    },
    [9] = {
        [1] = {
            renwu = "角色转生等级达到<font color='#01f801'>10转</font>",
        },
        [2] = {
            renwu = "击杀<font color='#01f801'>320级</font>及以上怪物<font color='#01f801'>100只</font>",
        },
        [3] = {
            renwu = "穿戴<font color='#01f801'>6件</font><font color='#01f801'>10转</font>以上装备",
        },
        [4] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
        [5] = {
            renwu = "角色转生等级达到<font color='#01f801'>1转</font>",
        },
    }
}
function getcfg_mianfeihuiyuan()
    return cfg_huiyuan
end

--
function mianfeihuiyuan(actor)
    lib996:showformwithcontent(actor, "A/免费会员", "")
end

function SyncResponse(actor)
    local cur_VIP = lib996:getint(0, actor, cfg_huiyuan.var.cur_VIP)
    sendList = {}
    table.insert(sendList, cur_VIP)
    lib996:showformwithcontent(actor, "", "mianfeihuiyuan.SyncResponse(" .. serialize(sendList) .. ")")
end

function shengji(actor)
    local cur_VIP = lib996:getint(0, actor, cfg_huiyuan.var.cur_VIP)
    if cur_VIP >= #cfg_huiyuan then
        return
    end
    --    升级vip等级并给装备
    --1.升级等级
    lib996:setint(0, actor, cfg_huiyuan.var.cur_VIP, cur_VIP + 1)
    lib996:sendmsg(actor,1,cfg_huiyuan.msg.chenggong)
    --2.给奖励
    _Fsendmail(lib996:getbaseinfo(actor, ConstCfg.gbase.name), cfg_huiyuan.id, cfg_huiyuan[cur_VIP + 1].jiangli, "VIP"..(cur_VIP + 1))
    --3.刷新界面
    SyncResponse(actor)
end

---@param index integer 任务id
function finish_renwu(actor, index)
    print(index)
end