-----
----- Generated by EmmyLua(https://github.com/EmmyLua)
----- Created by zhoujie.
----- DateTime: 2022/9/30 17:21
--lib996:include("Script/serialize.lua")
--
----狂暴表格
--local cfg_kuangbao = {
--    [1] = {
--        name = "狂暴之力",
--        cost = {
--            [1] = {
--                [1] = 12, --rmb
--                [2] = 100,
--            },
--        },
--        shuxing = {
--            [1] = {
--                [1] = 1,
--                [2] = 1000,
--            },
--            [2] = {
--                [1] = 3,
--                [2] = 1000,
--            },
--            [3] = {
--                [1] = 58,
--                [2] = 10000,
--            }
--        },
--        diaoluo = {
--            [1] = {
--                [1] = 12, -- rmb
--                [2] = 50,
--            },
--        },
--        shijian = {
--            [1] = {
--                [1] = 23,
--                [2] = 8,
--            },
--        },
--        effectid = 30111,
--    },
--}
--
----外部获取狂暴表格
--function getcfg_kuangbao(actor)
--    return cfg_kuangbao
--end
-----外部调用狂暴
--function kuangbaozhili(actor)
--    --print("我是狂暴")
--    lib996:showformwithcontent(actor, "A/狂暴之力", "")
--end
--
--
-----点击开启狂暴按钮
--function kuangbaook(actor)
--    --查看人物是否有“狂暴之力”
--    if lib996:checktitle(actor, cfg_kuangbao[1].name) then
--        lib996:sendmsg(actor, 1, '{"Msg":"<font color=\'#ff0000\'>已开启狂暴</font>","Type":9}')
--        return
--    end
--    --查看人物货币是否充足,不足则提示
--    local cost = cfg_kuangbao[1].cost
--    local name = QsQIsItemNumByTable(actor, cost)
--    if name then
--        print("不足货币:"..name)
--        lib996:sendmsg(actor, 1, '{"Msg":"<font color=\'#ff0000\'>货币不足</font>","Type":9}')
--        return
--    end
--    --拿走需要的货币
--    QsQtakeItemByTable(actor, cost)
--    --添加“狂暴之力”称号
--    lib996:confertitle(actor, cfg_kuangbao[1].name)
--    --更新狂暴附加属性
--    QsQupdateSomeAddr(actor, {}, cfg_kuangbao[1].shuxing)
--    --给人物播放狂暴特效
--    lib996:playeffect(actor, cfg_kuangbao[1].effectid, 0, 0, 0, 0, 1)
--    lib996:sendmsg(actor, 1, '{"Msg":"<font color=\'#ff0000\'>成功开启狂暴之力</font>","Type":9}')
--end
--
-----杀死带有狂暴的人
-----@param actor 杀人的人
-----@param play 被杀的人
--function KillerReword(actor, play)
--    if not lib996:checktitle(play, cfg_kuangbao[1].name) then
--        return
--    end
--    --被杀者奖励
--    lib996:changemoney(actor, cfg_kuangbao[1].diaoluo[1][1], "+", cfg_kuangbao[1].diaoluo[1][2], "", true)
--    local msg = '{"Msg":"<font color=\'#ff0000\'>获得击杀奖励' .. cfg_kuangbao[1].diaoluo[1][2]..Item.getNameByIdx(cfg_kuangbao[1].diaoluo[1][1])..'</font>","Type":9}'
--    lib996:sendmsg(actor, 1, msg)
--    --去除被杀者身上特效和属性
--    lib996:deprivetitle(play,cfg_kuangbao[1].name)
--    QsQupdateSomeAddr(play, cfg_kuangbao[1].shuxing, {})
--    lib996:clearplayeffect(play,cfg_kuangbao[1].effectid)
--    lib996:sendmsg(play, 1, '{"Msg":"<font color=\'#ff0000\'>狂暴之力消失</font>","Type":9}')
--end
--
-----添加击杀事件
--GameEvent.add(EventCfg.onkillplay, KillerReword, "击杀狂暴奖励")
--
----登录附带狂暴之力属性
--GameEvent.add(EventCfg.onLoginAttr, function(actor, loginattrs)
--    if not lib996:checktitle(actor, cfg_kuangbao[1].name) then
--        return
--    end
--    --播放特效
--    lib996:playeffect(actor, cfg_kuangbao[1].effectid, 0, 0, 0, 0, 1)
--    table.insert(loginattrs, cfg_kuangbao[1].shuxing)
--end, "登录狂暴附加属性")